<div>

  <form name="form" ng-submit="submit(row, cover)" novalidate>
    <h3>Dane filmu</h3>
    <div class="row" ng-repeat="column in columns">
      <div class="large-2 columns">
        <div class="right">
          <strong>{{ column.guiName }}</strong>
        </div>
      </div>
      <div class="large-10 columns">
        <div ng-if="column.type === 'text'">
          <input type="text"
                 name="{{column.dbName}}"
                 ng-maxlength="255"
                 ng-model="row[column.dbName]"
                 ng-model-options="{updateOn: 'movieSave'}"
                 ng-class="(form[column.dbName].$error.required || form[column.dbName].$error.maxlength) ? 'error' : ''"
                 placeholder="{{ column.guiName }}"
                 ng-required="column.isRequired">

          <small class="error error-label"
                 ng-if="(form[column.dbName].$error.required || form[column.dbName].$error.maxlength)">
            To pole jest wymagane (max. 255 znaków)
          </small>
        </div>

        <div ng-if="column.type === 'textarea'">
          <textarea rows="4"
                    ng-model="row[column.dbName]"
                    ng-model-options="{updateOn: 'movieSave'}"
                    ng-class="(form[column.dbName].$error.required || form[column.dbName].$error.maxlength) ? 'error' : ''"
                    placeholder="{{ column.guiName }}"
                    ng-required="column.isRequired"></textarea>


          <small class="error error-label"
                 ng-if="(form[column.dbName].$error.required || form[column.dbName].$error.maxlength)">
            To pole jest wymagane (max. 255 znaków)
          </small>
        </div>

        <div ng-if="column.type === 'number'">
          <input type="number"
                 name="{{column.dbName}}"
                 ng-model="row[column.dbName]"
                 ng-model-options="{updateOn: 'movieSave'}"
                 ng-class="(form[column.dbName].$error.required) ? 'error' : ''"
                 placeholder="{{ column.guiName }}"
                 ng-required="column.isRequired">
        </div>
      </div>
    </div>

    <div class="row" ng-if="mode === 'update'">
      <div class="large-2 columns">
        <div class="right">
          <strong>Okładka</strong>
        </div>
      </div>
      <div class="large-10 columns">

        <label for="cover">
          <img ng-if="cover" ngf-thumbnail="cover" class="movie-cover th">
          <img ng-if="!cover" class="movie-cover th" ng-src="{{ cover || (row.cover ? ('assets/images/covers/' + row.cover) : 'http://placehold.it/350x200') }}">
        </label>
        <input id="cover"
               ngf-change="upload(form, cover)"
               type="file" ngf-select
               name="cover"
               accept="image/*"
               ng-model="cover"
               ngf-pattern="'.jpg,.png,.bmp'">

      </div>
    </div>

    <br>
    <div class="right">
      <ul class="button-group">
        <li>
          <button class="button secondary" ng-click="$dismiss()">Anuluj</button>
        </li>
        <li>
          <button class="button primary" type="submit">
            Zapisz
          </button>
        </li>
      </ul>
    </div>
  </form>

</div>
